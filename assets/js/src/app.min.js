(function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=b[h],j;if(i)return i.exports;if(!(j=a[h]||a[h=d(h,"./index")]))throw"module '"+f+"' not found";i={id:h,exports:{}};try{return b[h]=i,j(i.exports,function(a){return c(a,e(h))},i),i.exports}catch(k){throw delete b[h],k}},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]}}return this.require.define}).call(this)({index:function(a,b,c){jQuery(function(a){})},"modules/cornify":function(a,b,c){var d=0,e=function(){d+=1;var a="http://www.cornify.com/",b=document.createElement("div");b.style.position="fixed";var c="px",g=Math.random()*.75,h=768,i=1024,j=0,k=0,l=document.documentElement;typeof window.innerHeight=="number"?(h=window.innerHeight,i=window.innerWidth):l&&l.clientHeight?(h=l.clientHeight,i=l.clientWidth):(c="%",j=Math.round(j*100)+"%"),b.onclick=e,b.style.zIndex=10,b.style.outline=0,d==15?(b.style.top=Math.max(0,Math.round((h-530)/2))+"px",b.style.left=Math.round((i-530)/2)+"px",b.style.zIndex=1e3):(c=="px"?b.style.top=Math.round(h*g)+c:b.style.top=j,b.style.left=Math.round(Math.random()*90)+"%");var m=document.createElement("img"),n=new Date,o=n.getTime();d==15&&(o=0),m.setAttribute("src",a+"getacorn.php?r="+o+"&url="+document.location.href);var p="all .1s linear";b.style.WebkitTransition=p,b.style.WebkitTransform="rotate(1deg) scale(1.01,1.01)",b.style.transition="all .1s linear",b.onmouseover=function(){var a=1+Math.round(Math.random()*10)/100,b=Math.round(Math.random()*20-10),c="rotate("+b+"deg) scale("+a+","+a+")";this.style.transform=c,this.style.WebkitTransform=c},b.onmouseout=function(){var a=.9+Math.round(Math.random()*10)/100,b=Math.round(Math.random()*6-3),c="rotate("+b+"deg) scale("+a+","+a+")";this.style.transform=c,this.style.WebkitTransform=c};var q=document.getElementsByTagName("body")[0];q.appendChild(b),b.appendChild(m);if(d==5){var r=document.getElementById("__cornify_css");if(!r){var s=document.getElementsByTagName("head")[0],t=document.createElement("link");t.id="__cornify_css",t.type="text/css",t.rel="stylesheet",t.href="http://www.cornify.com/css/cornify.css",t.media="screen",s.appendChild(t)}f()}},f=function(){var a=6,b,c,d,e=["Happy","Sparkly","Glittery","Fun","Magical","Lovely","Cute","Charming","Amazing","Wonderful"];while(a>=1){b=document.getElementsByTagName("h"+a);for(d=0;d<b.length;d++)c=b[d],c.innerHTML=e[Math.floor(Math.random()*e.length)]+" "+c.innerHTML;a-=1}};this.cornami={input:"",pattern:"38384040373937396665",clear:setTimeout("cornami.clear_input()",5e3),load:function(){window.document.onkeydown=function(a){if(cornami.input==cornami.pattern){e(),clearTimeout(cornami.clear);return}cornami.input+=a?a.keyCode:event.keyCode,cornami.input==cornami.pattern&&e(),clearTimeout(cornami.clear),cornami.clear=setTimeout("cornami.clear_input()",5e3)}},clear_input:function(){cornami.input="",clearTimeout(cornami.clear)}},this.cornami.load(),c.exports=e},"modules/localstorage":function(a,b,c){function d(){return((1+Math.random())*65536|0).toString(16).substring(1)}function e(){return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}window.Store=function(a){this.name=a;var b=localStorage.getItem(this.name);this.records=b&&b.split(",")||[]},_.extend(Store.prototype,{save:function(){localStorage.setItem(this.name,this.records.join(","))},create:function(a){return a.id||(a.id=a.attributes.id=e()),localStorage.setItem(this.name+"-"+a.id,JSON.stringify(a)),this.records.push(a.id.toString()),this.save(),a},update:function(a){return localStorage.setItem(this.name+"-"+a.id,JSON.stringify(a)),_.include(this.records,a.id.toString())||this.records.push(a.id.toString()),this.save(),a},find:function(a){return JSON.parse(localStorage.getItem(this.name+"-"+a.id))},findAll:function(){return _.map(this.records,function(a){return JSON.parse(localStorage.getItem(this.name+"-"+a))},this)},destroy:function(a){return localStorage.removeItem(this.name+"-"+a.id),this.records=_.reject(this.records,function(b){return b==a.id.toString()}),this.save(),a}}),Backbone.localSync=function(a,b,c,d){typeof c=="function"&&(c={success:c,error:d});var e,f=b.localStorage||b.collection.localStorage;switch(a){case"read":e=b.id!=undefined?f.find(b):f.findAll();break;case"create":e=f.create(b);break;case"update":e=f.update(b);break;case"delete":e=f.destroy(b)}e?c.success(e):c.error("Record not found")},Backbone.ajaxSync=Backbone.sync,Backbone.sync=Backbone.localSync},"modules/namespace":function(a,b,c){this.Stout=this.Stout||{module:function(){var a={};return function(b){return a[b]?a[b]:a[b]={Views:{}}}}(),app:_.extend({},Backbone.Events)},Backbone.Model.prototype.idAttribute="_id",(this.Stout.local=!this.ea_loggedIn)?b("modules/localstorage"):this.Store=function(){return{}},c.exports=this.Stout},"modules/touch":function(a,b,c){(function(a){var b,c,d,e,f,g,h,i;a.support.touch="ontouchstart"in window,e={},c=function(a){return"tagName"in a?a:a.parentNode},d=function(a,b,c,d){var e,f;return e=Math.abs(a-b),f=Math.abs(c-d),e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"},a(function(){return a("body").bind("touchstart",function(a){var b,d;return a=a.originalEvent,d=Date.now(),b=d-(e.last||d),e.target=c(a.touches[0].target),e.x1=a.touches[0].pageX,e.y1=a.touches[0].pageY,e.last=d}).bind("touchmove",function(a){return a=a.originalEvent,e.x2=a.touches[0].pageX,e.y2=a.touches[0].pageY}).bind("touchend",function(b){b=b.originalEvent;if(e.x2>0||e.y2>0)return(Math.abs(e.x1-e.x2)>30||Math.abs(e.y1-e.y2)>30&&a(e.target).trigger("swipe"))&&a(e.target).trigger("swipe"+d(e.x1,e.x2,e.y1,e.y2)),e.x1=e.x2=e.y1=e.y2=e.last=0;if("last"in e)return a(e.target).trigger("tap"),e={}}).bind("touchcancel",function(a){return e={}})}),a.support.touch?a("body").bind("click",function(a){return a.preventDefault()}):a(function(){return a("body").bind("click",function(b){return a(b.target).trigger("tap")})}),f=["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","tap"],g=function(b){return a.fn[b]=function(a){return this.bind(b,a)}};for(h=0,i=f.length;h<i;h++)b=f[h],g(b)})(jQuery)},stout_detail:function(a,b,c){jQuery(function(a){var b=a("#stout-rating");b.on("change","input",function(c){var d=a(c.target);window.confirm("Are you sure you wanna rate this?")&&a.post(b.attr("action"),{rating:d.val()}).done(function(c){b.find("input").not(d).attr("disabled",!0),a(".rating").html("<span>"+c.rating+"</span> "+c.starRating)}).fail(function(a,b){alert("Looks like you've rated this one already")})})})},stouts:function(a,b,c){var d=b("modules/namespace"),e=b("modules/cornify"),f=Backbone.Model.extend({initialize:function(){this.deferred=this.fetch()},localStorage:new Store("user"),url:"/api/user"}),g=Backbone.View.extend({initialize:function(){this.setCount(this.model.get("count")),this.model.bind("change",function(a){this.setCount(a.get("count"))},this)},setCount:function(a){var b=this.$el.find(".counter");b.text(a),this.$el.attr("class","d_"+(a>9?10:a))}}),h=Backbone.Model.extend({initialize:function(){this.view=new g({model:this,el:$("#"+this.get("beer"))})}}),i=Backbone.Collection.extend({url:"/api/drinks",localStorage:new Store("drinks"),model:h,initialize:function(){this.fetch()},findByBeer:function(a){return this.find(function(b){return a===b.get("beer")})},drink:function(a,b){var c=this.findByBeer(a);if(!confirm("Are you sure you drank that?"))return;return c?(c.get("count")>=13&&e(),c.save({count:c.get("count")+1})):(c=new h({beer:a,user:b,count:1}),this.add(c),c.save())}}),j=Backbone.View.extend({initialize:function(a){a.user&&(this.user=a.user),a.drinks&&(this.drinks=a.drinks)},events:{"click .button":"onDrink"},onDrink:function(a){a.preventDefault();var b=$(a.currentTarget);this.drinks.drink(b.data("slug"),this.user.get("login"))}});jQuery(function(a){d.drinks=new i,d.user=new f,d.stoutList=new j({el:a("#stout-list"),user:d.user,drinks:d.drinks})})}})